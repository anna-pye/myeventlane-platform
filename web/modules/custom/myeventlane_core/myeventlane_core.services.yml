services:

  myeventlane_core.optional_service_resolver:
    class: Drupal\myeventlane_core\Service\OptionalServiceResolver

  myeventlane_core.route_helper:
    class: Drupal\myeventlane_core\Service\RouteHelper
    arguments:
      - '@router.route_provider'
      - '@url_generator'

  myeventlane_core.date_formatter:
    class: Drupal\myeventlane_core\Service\DateFormatter
    arguments:
      - '@datetime.time'
      - '@date.formatter'
      - '@language_manager'

  myeventlane_core.stripe:
    class: Drupal\myeventlane_core\Service\StripeService
    arguments:
      - '@config.factory'
      - '@entity_type.manager'
      - '@logger.factory'

  myeventlane_core.category_digest_generator:
    class: Drupal\myeventlane_core\Service\CategoryDigestGenerator
    arguments:
      - '@entity_type.manager'
      - '@plugin.manager.mail'
      - '@renderer'
      - '@flag'
      - '@myeventlane_boost.manager'

  myeventlane_core.category_digest_cron:
    class: Drupal\myeventlane_core\Service\CategoryDigestCron
    arguments:
      - '@myeventlane_core.category_digest_generator'
      - '@queue'

  myeventlane_core.category_digest_queue:
    class: Drupal\myeventlane_core\Queue\CategoryDigestQueue
    arguments:
      - '@myeventlane_core.category_digest_generator'
      - '@entity_type.manager'
    tags:
      - { name: queue_worker, queue_name: mel_category_digest, cron: 60 }

  myeventlane_core.domain_detector:
    class: Drupal\myeventlane_core\Service\DomainDetector
    arguments:
      - '@request_stack'
      - '@config.factory'

  myeventlane_core.vendor_domain_subscriber:
    class: Drupal\myeventlane_core\EventSubscriber\VendorDomainSubscriber
    arguments:
      - '@myeventlane_core.domain_detector'
      - '@current_route_match'
      - '@current_user'
      - '@config.factory'
      - '@logger.factory'
    tags:
      - { name: event_subscriber }

  myeventlane_core.vendor_theme_negotiator:
    class: Drupal\myeventlane_core\Theme\VendorThemeNegotiator
    arguments:
      - '@myeventlane_core.domain_detector'
    tags:
      - { name: theme_negotiator, priority: 2000 }

  myeventlane_core.route_theme_negotiator:
    class: Drupal\myeventlane_core\Theme\RouteThemeNegotiator
    tags:
      - { name: theme_negotiator, priority: 1500 }

  myeventlane_core.admin_theme_negotiator:
    class: Drupal\myeventlane_core\Theme\AdminThemeNegotiator
    arguments:
      - '@myeventlane_core.domain_detector'
    tags:
      - { name: theme_negotiator, priority: 2100 }

  myeventlane_core.admin_domain_redirect_subscriber:
    class: Drupal\myeventlane_core\EventSubscriber\AdminDomainRedirectSubscriber
    arguments:
      - '@myeventlane_core.domain_detector'
      - '@current_user'
    tags:
      - { name: event_subscriber }

  myeventlane_core.category_color:
    class: Drupal\myeventlane_core\Service\CategoryColorService

  myeventlane_core.front_category_stats:
    class: Drupal\myeventlane_core\Service\FrontCategoryStatsService
    arguments:
      - '@entity_type.manager'
      - '@cache.data'
      - '@datetime.time'
      - '@myeventlane_core.category_color'
      - '@config.factory'

  myeventlane_core.homepage_location:
    class: Drupal\myeventlane_core\Service\HomepageLocationService
    arguments:
      - '@entity_type.manager'
      - '@current_user'
      - '@database'

  myeventlane_core.homepage_popularity:
    class: Drupal\myeventlane_core\Service\HomepagePopularityService
    arguments:
      - '@database'
      - '@entity_type.manager'
      - '@myeventlane_boost.manager'

  myeventlane_core.homepage_organiser:
    class: Drupal\myeventlane_core\Service\HomepageOrganiserService
    arguments:
      - '@entity_type.manager'
      - '@cache.data'

  myeventlane_core.vendor_session_bootstrap_subscriber:
    class: Drupal\myeventlane_core\EventSubscriber\VendorSessionBootstrapSubscriber
    arguments:
      - '@current_user'
      - '@session_manager'
      - '@myeventlane_core.domain_detector'
    tags:
      - { name: event_subscriber }

  myeventlane_core.staging_security_subscriber:
    class: Drupal\myeventlane_core\EventSubscriber\StagingSecuritySubscriber
    arguments: ['@config.factory']
    tags:
      - { name: event_subscriber }

  myeventlane_core.cart_page_route_subscriber:
    class: Drupal\myeventlane_core\EventSubscriber\CartPageRouteSubscriber
    tags:
      - { name: event_subscriber }

  myeventlane_core.entity_view_display_presave:
    class: Drupal\myeventlane_core\Service\EntityViewDisplayPresave
    arguments:
      - '@entity_type.manager'
      - '@cache_tags.invalidator'
      - '@logger.factory'

  myeventlane_core.ticket_label_resolver:
    class: Drupal\myeventlane_core\Service\TicketLabelResolver

  myeventlane_core.display_name_resolver:
    class: Drupal\myeventlane_core\Service\DisplayNameResolver
    arguments:
      - '@entity_type.manager'

  myeventlane_onboarding.manager:
    class: Drupal\myeventlane_core\Service\OnboardingManager
    arguments:
      - '@entity_type.manager'
      - '@logger.factory'
      - '@current_user'
      - '@datetime.time'