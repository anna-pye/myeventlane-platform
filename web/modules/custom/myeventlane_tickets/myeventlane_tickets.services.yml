services:
  myeventlane_tickets.ticket_code_generator:
    class: Drupal\myeventlane_tickets\Ticket\TicketCodeGenerator
    arguments: ['@uuid']

  myeventlane_tickets.ticket_pdf_generator:
    class: Drupal\myeventlane_tickets\Ticket\TicketPdfGenerator
    arguments: ['@renderer']

  # Alias for shorter service name.
  myeventlane_tickets.pdf_generator:
    alias: myeventlane_tickets.ticket_pdf_generator

  myeventlane_tickets.ticket_issuer:
    class: Drupal\myeventlane_tickets\Ticket\TicketIssuer
    arguments: [
      '@entity_type.manager',
      '@myeventlane_tickets.ticket_code_generator',
      '@logger.factory'
    ]

  myeventlane_tickets.ticket_assignment_token:
    class: Drupal\myeventlane_tickets\Service\TicketAssignmentTokenService

  myeventlane_tickets.event_access:
    class: Drupal\myeventlane_tickets\Service\EventAccess
    arguments: ['@current_user', '@entity_type.manager']

  myeventlane_tickets.access.event_tickets:
    class: Drupal\myeventlane_tickets\Access\EventTicketsAccess
    arguments: ['@myeventlane_tickets.event_access']
    tags:
      - { name: access_check }

  logger.channel.myeventlane_tickets:
    class: Drupal\Core\Logger\LoggerChannel
    factory: ['@logger.factory', 'get']
    arguments: ['myeventlane_tickets']

  myeventlane_tickets.ticket_assigned_subscriber:
    class: Drupal\myeventlane_tickets\EventSubscriber\TicketAssignedSubscriber
    arguments:
      - '@entity_type.manager'
      - '@plugin.manager.mail'
      - '@myeventlane_tickets.ticket_pdf_generator'
      - '@logger.channel.myeventlane_tickets'