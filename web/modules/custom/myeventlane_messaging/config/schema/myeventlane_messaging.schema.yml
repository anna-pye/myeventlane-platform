# Schema for MyEventLane Messaging module configuration.

myeventlane_messaging.settings:
  type: config_object
  label: 'MyEventLane Messaging settings'
  mapping:
    from_name:
      type: string
      label: 'From name'
    from_email:
      type: email
      label: 'From email'
    reply_to:
      type: email
      label: 'Reply-to email'
    event_reminder_enabled:
      type: boolean
      label: 'Event reminders enabled'
    event_reminder_hours:
      type: integer
      label: 'Event reminder hours before'
    cart_abandoned_enabled:
      type: boolean
      label: 'Cart abandoned reminders enabled'
    cart_abandoned_hours:
      type: integer
      label: 'Cart abandoned hours after'
    batch_size:
      type: integer
      label: 'Queue batch size'
    max_messages_per_run:
      type: integer
      label: 'Max messages per cron run'

# Template configs: myeventlane_messaging.template.*
myeventlane_messaging.template.*:
  type: config_object
  label: 'Messaging template'
  mapping:
    enabled:
      type: boolean
      label: 'Template enabled'
    subject:
      type: string
      label: 'Subject line (Twig)'
    preheader:
      type: string
      label: 'Email preheader (Twig)'
    body:
      type: string
      label: 'Body HTML (Twig, legacy)'
    body_html:
      type: string
      label: 'Body HTML (Twig)'
    sms_text:
      type: string
      label: 'SMS text (Twig)'
    ab_test:
      type: mapping
      label: 'A/B test'
      mapping:
        enable:
          type: boolean
          label: 'A/B test enabled'
        variants:
          type: mapping
          label: 'Variants'
          mapping:
            A:
              type: mapping
              label: 'Variant A'
              mapping:
                weight:
                  type: integer
                  label: 'Weight (0-100)'
                subject:
                  type: string
                  label: 'Subject override'
                preheader:
                  type: string
                  label: 'Preheader override'
                body_html:
                  type: string
                  label: 'Body HTML override'
                sms_text:
                  type: string
                  label: 'SMS text override'
                marketing:
                  type: mapping
                  label: 'Marketing overrides'
            B:
              type: mapping
              label: 'Variant B'
              mapping:
                weight:
                  type: integer
                  label: 'Weight (0-100)'
                subject:
                  type: string
                  label: 'Subject override'
                preheader:
                  type: string
                  label: 'Preheader override'
                body_html:
                  type: string
                  label: 'Body HTML override'
                sms_text:
                  type: string
                  label: 'SMS text override'
                marketing:
                  type: mapping
                  label: 'Marketing overrides'
    utm:
      type: mapping
      label: 'UTM parameters'
      mapping:
        enable:
          type: boolean
          label: 'UTM enabled'
        params:
          type: mapping
          label: 'UTM params'
          mapping:
            utm_source:
              type: string
              label: 'utm_source'
            utm_medium:
              type: string
              label: 'utm_medium'
            utm_campaign:
              type: string
              label: 'utm_campaign'

# Vendor-level brand override: myeventlane_messaging.brand.vendor.{vendor_id}
myeventlane_messaging.brand.vendor.*:
  type: config_object
  label: 'Vendor messaging brand'
  mapping:
    from_name:
      type: string
      label: 'From name'
    from_email:
      type: email
      label: 'From email'
    reply_to:
      type: email
      label: 'Reply-to email'
    logo_url:
      type: string
      label: 'Logo URL'
    accent_color:
      type: string
      label: 'Accent colour'
    footer_text:
      type: string
      label: 'Footer text'
    marketing:
      type: mapping
      label: 'Marketing block'
      mapping:
        promo_title:
          type: string
          label: 'Promo title'
        promo_body:
          type: string
          label: 'Promo body'
        promo_url:
          type: string
          label: 'Promo URL'
        promo_button:
          type: string
          label: 'Promo button label'

# Event-level brand override: myeventlane_messaging.brand.event.{nid}
myeventlane_messaging.brand.event.*:
  type: config_object
  label: 'Event messaging brand override'
  mapping:
    from_name:
      type: string
      label: 'From name'
    from_email:
      type: email
      label: 'From email'
    reply_to:
      type: email
      label: 'Reply-to email'
    logo_url:
      type: string
      label: 'Logo URL'
    accent_color:
      type: string
      label: 'Accent colour'
    footer_text:
      type: string
      label: 'Footer text'
    marketing:
      type: mapping
      label: 'Marketing block'
      mapping:
        promo_title:
          type: string
          label: 'Promo title'
        promo_body:
          type: string
          label: 'Promo body'
        promo_url:
          type: string
          label: 'Promo URL'
        promo_button:
          type: string
          label: 'Promo button label'
