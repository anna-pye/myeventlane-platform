services:
  logger.channel.myeventlane_messaging:
    parent: logger.channel_base
    arguments: ['myeventlane_messaging']

  myeventlane_messaging.message_renderer:
    class: Drupal\myeventlane_messaging\Service\MessageRenderer
    arguments:
      - '@twig'
      - '@renderer'

  myeventlane_messaging.manager:
    class: Drupal\myeventlane_messaging\Service\MessagingManager
    arguments:
      - '@config.factory'
      - '@plugin.manager.mail'
      - '@language_manager'
      - '@queue'
      - '@logger.channel.myeventlane_messaging'
      - '@myeventlane_messaging.message_renderer'

  myeventlane_messaging.scheduler.boost:
    class: Drupal\myeventlane_messaging\Scheduler\BoostReminderScheduler
    arguments:
      - '@logger.channel.myeventlane_messaging'
      - '@datetime.time'
      - '@entity_type.manager'
      - '@queue'
      - '@date.formatter'
      - '@myeventlane_boost.manager'

  myeventlane_messaging.scheduler.cart:
    class: Drupal\myeventlane_messaging\Scheduler\CartAbandonedScheduler
    arguments:
      - '@logger.channel.myeventlane_messaging'
      - '@datetime.time'
      - '@entity_type.manager'
      - '@queue'
      - '@state'
      - '@myeventlane_messaging.manager'

  myeventlane_messaging.scheduler.event:
    class: Drupal\myeventlane_messaging\Scheduler\EventReminderScheduler
    arguments:
      - '@logger.channel.myeventlane_messaging'
      - '@datetime.time'
      - '@entity_type.manager'
      - '@queue'
      - '@state'
      - '@myeventlane_messaging.manager'
      - '@date.formatter'

  myeventlane_messaging.event_reminder_scheduler:
    class: Drupal\myeventlane_messaging\Service\EventReminderScheduler
    arguments:
      - '@entity_type.manager'
      - '@queue'
      - '@datetime.time'
      - '@logger.channel.myeventlane_messaging'

  myeventlane_messaging.order_placed_subscriber:
    class: Drupal\myeventlane_messaging\EventSubscriber\OrderPlacedSubscriber
    arguments:
      - '@entity_type.manager'
      - '@myeventlane_core.ticket_label_resolver'
    tags:
      - { name: event_subscriber }
