services:
  # Analytics data service.
  myeventlane_analytics.data:
    class: Drupal\myeventlane_analytics\Service\AnalyticsDataService
    arguments: ['@entity_type.manager', '@database']

  # Sales analytics service.
  myeventlane_analytics.sales:
    class: Drupal\myeventlane_analytics\Service\SalesAnalyticsService
    arguments: ['@entity_type.manager', '@myeventlane_analytics.data']

  # Conversion analytics service.
  myeventlane_analytics.conversion:
    class: Drupal\myeventlane_analytics\Service\ConversionAnalyticsService
    arguments: ['@entity_type.manager', '@myeventlane_analytics.data']

  # Report generator service.
  myeventlane_analytics.report:
    class: Drupal\myeventlane_analytics\Service\ReportGeneratorService
    arguments: ['@entity_type.manager', '@renderer', '@myeventlane_analytics.data']

  # Trending score service.
  myeventlane_analytics.trending_score:
    class: Drupal\myeventlane_analytics\Service\TrendingScoreService
    arguments: ['@database', '@datetime.time', '@entity_type.manager', '@myeventlane_boost.manager']

  # Logger channel for analytics module.
  logger.channel.myeventlane_analytics:
    parent: logger.channel_base
    arguments: ['myeventlane_analytics']

  # Phase 7 analytics (vendor revenue source; no Boost).
  myeventlane_analytics.phase7.scope_resolver:
    class: Drupal\myeventlane_analytics\Phase7\Scope\AnalyticsScopeResolver
    arguments: ['@current_user', '@entity_type.manager']

  myeventlane_analytics.phase7.guard:
    class: Drupal\myeventlane_analytics\Phase7\Guard\AnalyticsQueryGuard
    arguments: ['@logger.channel.myeventlane_analytics']

  myeventlane_analytics.phase7.query:
    class: Drupal\myeventlane_analytics\Phase7\Service\AnalyticsQueryService
    arguments: ['@myeventlane_analytics.phase7.scope_resolver', '@myeventlane_analytics.phase7.guard']

  myeventlane_analytics.admin_revenue_query:
    class: Drupal\myeventlane_analytics\Phase7\Service\AdminRevenueQueryService
    arguments: ['@myeventlane_analytics.phase7.query', '@database']

  myeventlane_analytics.popular_events:
    class: Drupal\myeventlane_analytics\Service\PopularEventsService
    arguments:
      - '@database'
      - '@datetime.time'
      - '@logger.factory'

  myeventlane_analytics.trending_categories:
    class: Drupal\myeventlane_analytics\Service\TrendingCategoriesService
    arguments:
      - '@database'
      - '@datetime.time'
      - '@entity_type.manager'
      - '@myeventlane_analytics.popular_events'
      - '@logger.factory'