# Event creation wizard routes.
# Create: creates draft event and redirects to basics step.
myeventlane_event.wizard.create:
  path: '/vendor/events/create'
  defaults:
    _controller: '\Drupal\myeventlane_event\Controller\EventWizardCreateController::createDraft'
    _title: 'Create event'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'

# Edit event via wizard: redirects to basics step.
myeventlane_event.wizard.edit:
  path: '/vendor/events/{node}/edit'
  defaults:
    _controller: '\Drupal\myeventlane_event\Controller\EventWizardCreateController::edit'
    _title: 'Edit event'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    node: '\d+'
  options:
    parameters:
      node:
        type: entity:node
        bundle:
          - event

# Wizard step forms (Form API, save on every step).
myeventlane_event.wizard.basics:
  path: '/vendor/events/{event}/build/basics'
  defaults:
    _form: '\Drupal\myeventlane_event\Form\EventWizardBasicsForm'
    _title: 'Event basics'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    event: '\d+'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event

myeventlane_event.wizard.when_where:
  path: '/vendor/events/{event}/build/when-where'
  defaults:
    _form: '\Drupal\myeventlane_event\Form\EventWizardWhenWhereForm'
    _title: 'When & Where'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    event: '\d+'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event

myeventlane_event.wizard.tickets:
  path: '/vendor/events/{event}/build/tickets'
  defaults:
    _form: '\Drupal\myeventlane_event\Form\EventWizardTicketsForm'
    _title: 'Tickets'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    event: '\d+'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event

myeventlane_event.wizard.details:
  path: '/vendor/events/{event}/build/details'
  defaults:
    _form: '\Drupal\myeventlane_event\Form\EventWizardDetailsForm'
    _title: 'Details'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    event: '\d+'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event

myeventlane_event.wizard.review:
  path: '/vendor/events/{event}/build/review'
  defaults:
    _form: '\Drupal\myeventlane_event\Form\EventWizardReviewForm'
    _title: 'Review & Publish'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    event: '\d+'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event

myeventlane_event.wizard.publish:
  path: '/vendor/events/{event}/build/publish'
  defaults:
    _form: '\Drupal\myeventlane_event\Form\EventWizardPublishForm'
    _title: 'Publish event'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    event: '\d+'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event

myeventlane_event.wizard.success:
  path: '/vendor/events/{event}/build/success'
  defaults:
    _controller: '\Drupal\myeventlane_event\Controller\VendorEventWizardController::success'
    _title: 'Event published successfully'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Access\VendorConsoleAccess::access'
    event: '\d+'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event

# Series instance generation (manual trigger).
myeventlane_event.generate_series_instances:
  path: '/vendor/event/{event}/series/generate'
  defaults:
    _form: '\Drupal\myeventlane_event\Form\GenerateSeriesInstancesForm'
    _title: 'Generate instances'
  requirements:
    _custom_access: '\Drupal\myeventlane_vendor\Controller\ManageSeriesInstancesController::access'
  options:
    parameters:
      event:
        type: entity:node
        bundle:
          - event
