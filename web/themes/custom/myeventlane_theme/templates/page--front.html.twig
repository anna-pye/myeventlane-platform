{#
  MEL v2 Front Page
  - Hero (component)
  - Featured Events (component)
  - Discover events (View render)
  - Secondary rows (Views)
#}

{% extends "page.html.twig" %}

{#
  NOTE:
  - Sections render regions that should be populated with Views blocks in Drupal.
  - Hero and Featured Events use component includes.
#}

{% block hero %}
  {% set popular_tags = popular_tags|default([]) %}
  {% include '@myeventlane_theme/components/hero/hero.twig' with { popular_tags: popular_tags } %}
{% endblock %}

{% block content %}
  {{ attach_library('myeventlane_theme/front') }}
  <div class="mel-home">
    {% if page.home_featured %}
      {% include '@myeventlane_theme/components/featured-events/featured-events.twig' with {
        title: 'Featured Events'|t,
        subtitle: null,
        view: page.home_featured
      } %}
    {% endif %}

    {% if page.home_discover %}
      <section class="mel-home-section mel-home-section--discover" aria-labelledby="mel-home-discover-title">
        <div class="mel-container">
          <div class="mel-section-head">
            <h2 id="mel-home-discover-title" class="mel-section-head__title">{{ 'Discover events'|t }}</h2>
            <a class="mel-section-head__link" href="{{ path('view.upcoming_events.page_events') }}">{{ 'View all'|t }}</a>
          </div>
          {{ page.home_discover }}
        </div>
      </section>
    {% endif %}

    {% if page.home_recommended %}
      <section class="mel-home-section mel-home-section--recommended" aria-labelledby="mel-home-recommended-title">
        <div class="mel-container">
          <div class="mel-section-head">
            <h2 id="mel-home-recommended-title" class="mel-section-head__title">{{ 'Recommended for you'|t }}</h2>
            <a class="mel-section-head__link" href="{{ path('view.upcoming_events.page_events') }}">{{ 'View all'|t }}</a>
          </div>
          {{ page.home_recommended }}
        </div>
      </section>
    {% endif %}

    {# Fallback: if no dedicated home regions are populated, render normal content. #}
    {% if not page.home_featured and not page.home_discover and not page.home_recommended %}
      <div class="mel-container">
        {{ page.content }}
      </div>
    {% endif %}
  </div>
{% endblock %}
