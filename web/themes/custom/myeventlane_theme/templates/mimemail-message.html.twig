{#
/**
 * @file
 * MyEventLane override for Mime Mail message template.
 *
 * Wraps all non-MyEventLane emails (core password reset, contact forms, etc.)
 * in MEL styling. Skips wrapping when body already contains data-mel-wrapper.
 *
 * @see template_preprocess_mimemail_message()
 */
#}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="x-apple-disable-message-reformatting" />
    <title>{{ subject|striptags }}</title>
  </head>
  <body style="margin:0; padding:0; background:#fef5ec;">
    {% set body_rendered = body|render|default('') %}
    {% set is_already_wrapped = 'data-mel-wrapper="1"' in body_rendered %}

    {% if is_already_wrapped %}
      {{ body|raw }}
    {% else %}
      {# logo_path is injected by myeventlane_theme_preprocess_mimemail_message() #}

      <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="background:#fef5ec; padding: 24px 0;">
        <tr>
          <td align="center" style="padding: 0 12px;">
            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="600" style="width:600px; max-width:600px; background:#ffffff; border-radius:16px; overflow:hidden; box-shadow:0 12px 28px rgba(0,0,0,0.08);">
              {% if logo_path|default('') %}
                <tr>
                  <td style="padding: 18px 24px 8px 24px; text-align:left;">
                    <img src="{{ logo_path }}" alt="MyEventLane" width="140" style="display:block; height:auto; border:0; outline:none; text-decoration:none;" />
                  </td>
                </tr>
              {% endif %}

              <tr>
                <td style="padding: 8px 24px 0 24px; font-family: Nunito, Arial, sans-serif; font-size: 14px; line-height: 1.4; color:#293241;">
                  {% if subject %}
                    <div style="font-weight:700; font-size:18px; line-height:1.2; margin: 0 0 10px 0;">
                      {{ subject }}
                    </div>
                  {% endif %}
                </td>
              </tr>

              <tr>
                <td style="padding: 0 24px 18px 24px; font-family: Nunito, Arial, sans-serif; font-size: 14px; line-height: 1.5; color:#293241;">
                  {{ body|raw }}
                </td>
              </tr>

              <tr>
                <td style="padding: 16px 24px; font-family: Nunito, Arial, sans-serif; font-size: 12px; line-height: 1.4; color:#6b7280; background:#ffffff; border-top: 1px solid rgba(0,0,0,0.06);">
                  <div style="margin:0;">
                    You are receiving this email from MyEventLane.
                  </div>
                </td>
              </tr>
            </table>

            <div style="font-family: Nunito, Arial, sans-serif; font-size: 12px; line-height: 1.4; color:#6b7280; padding: 12px 0 0 0;">
              <span style="opacity:0.9;">MyEventLane</span>
            </div>
          </td>
        </tr>
      </table>
    {% endif %}
  </body>
</html>
