{#
/**
 * @file
 * MEL page header component.
 *
 * Pure presentation-only header for listing pages (taxonomy, search, filters).
 *
 * Available variables:
 * - title: Page title string.
 * - show_search: Boolean; when TRUE renders the MEL search block.
 * - show_categories: Boolean; when TRUE renders the MEL category pills UI.
 * - categories: Optional array of items with keys: tid, label, slug.
 * - hero_image_url: Optional URL for hero background (desktop).
 * - hero_image_url_mobile: Optional URL for hero background (mobile viewports).
 * - hero_hide_on_mobile: Boolean; when TRUE, hide hero on mobile.
 */
#}
{% set show_search = show_search|default(false) %}
{% set show_categories = show_categories|default(false) %}
{% set categories = categories|default([]) %}
{% set hero_image_url = hero_image_url|default(null) %}
{% set hero_image_url_mobile = hero_image_url_mobile|default(null) %}
{% set hero_hide_on_mobile = hero_hide_on_mobile|default(false) %}
{% set has_hero = hero_image_url and not hero_hide_on_mobile %}

{{ attach_library('myeventlane_theme/mel-listing-header') }}

{% set hero_style = (hero_image_url and not hero_hide_on_mobile) ? ('--mel-hero-bg: url(' ~ hero_image_url ~ ')' ~ (hero_image_url_mobile ? '; --mel-hero-bg-mobile: url(' ~ hero_image_url_mobile ~ ')' : '')) : '' %}

<section class="mel-page-header{% if has_hero %} mel-page-header--hero{% endif %}"{% if hero_style %} style="{{ hero_style }}"{% endif %}>
  <h1 class="mel-page-title">
    {{ title }}
  </h1>

  <p class="mel-page-tagline">
    Your lane to great events.
  </p>

  {% if show_search %}
    {# Reuse the exact homepage search UI markup. #}
    {% include '@myeventlane_theme/components/front/_front-search.html.twig' with {
      front: {}
    } only %}
  {% endif %}

  {% if show_categories and categories %}
    <nav class="mel-category-pills" aria-label="Event categories">
      {% for c in categories %}
        <a
          href="{{ path('view.upcoming_events.page_category', {'arg_0': c.tid}) }}"
          class="mel-pill mel-pill--cat-{{ c.slug|default('default') }}"
        >
          {{ c.label }}
        </a>
      {% endfor %}
    </nav>
  {% endif %}
</section>
