{#
/**
 * @file
 * Template for the event booking page.
 *
 * Available variables:
 * - title: The event title.
 * - event_date_text: Formatted event date string.
 * - venue_text: Venue name or location.
 * - hero_url: URL to hero image (optional).
 * - matrix_form: Render array for the booking form (RSVP, tickets, or combined).
 * - rsvp_form: Render array for standalone RSVP form (if applicable).
 * - is_rsvp: Boolean, TRUE if event supports RSVP.
 * - is_paid: Boolean, TRUE if event supports paid tickets.
 * - event_mode: String, the event booking mode ('rsvp', 'paid', 'both', 'external', 'none').
 * - event: The event node entity.
 * - recommended_events: Render array for recommended events (optional).
 */
#}
<div class="mel-event-book" data-event-mode="{{ event_mode }}">
  <div class="mel-container">
    <div class="mel-event-book__layout">
      <main class="mel-event-book__main">
        <div class="mel-event-book__details mel-card mel-card--surface">
          {% if hero_url %}
            <div class="mel-event-book__media">
              <div class="mel-event-book__badge">
                {% if event_mode == 'rsvp' %}
                  {% include '@myeventlane_theme/components/event-type-pill.html.twig' with { type: 'rsvp', label: 'RSVP'|t, size: 'md' } only %}
                {% elseif event_mode == 'paid' %}
                  {% include '@myeventlane_theme/components/event-type-pill.html.twig' with { type: 'paid', label: 'Tickets'|t, size: 'md' } only %}
                {% elseif event_mode == 'external' %}
                  {% include '@myeventlane_theme/components/event-type-pill.html.twig' with { type: 'external', label: 'External'|t, size: 'md' } only %}
                {% endif %}
              </div>
              <img class="mel-event-book__image" src="{{ hero_url }}" alt="{{ title }}" loading="eager" />
            </div>
          {% endif %}

          <div class="mel-event-book__body">
            <h1 class="mel-event-book__title">{{ title }}</h1>

            {% if event_date_text %}
              <div class="mel-event-book__meta">
                <span class="mel-event-book__meta-icon" aria-hidden="true"></span>
                <span>{{ event_date_text }}</span>
              </div>
            {% endif %}

            {% if venue_text %}
              <div class="mel-event-book__meta">
                <span class="mel-event-book__meta-icon mel-event-book__meta-icon--location" aria-hidden="true"></span>
                <span>{{ venue_text }}</span>
              </div>
            {% endif %}
          </div>
        </div>
      </main>

      <aside class="mel-event-book__sidebar" role="complementary">
        <section class="mel-event-book__form mel-card mel-card--surface" aria-labelledby="mel-event-book-form-title">
          <div class="mel-event-book__form-head">
            <h2 class="mel-event-book__form-title" id="mel-event-book-form-title">
              {% if event_mode == 'rsvp' %}
                {{ 'RSVP for this event'|t }}
              {% elseif event_mode == 'paid' %}
                {{ 'Buy tickets'|t }}
              {% elseif event_mode == 'external' %}
                {{ 'Get tickets'|t }}
              {% else %}
                {{ 'Registration'|t }}
              {% endif %}
            </h2>
          </div>

          <div class="mel-event-book__form-body">
            {% if matrix_form %}
              {{ matrix_form }}
            {% elseif rsvp_form %}
              {{ rsvp_form }}
            {% else %}
              <div class="mel-alert mel-alert--info" role="status">
                {% if event_mode == 'none' %}
                  {{ 'Registration opens soon.'|t }}
                {% else %}
                  {{ "We couldn't load the booking form. Please refresh the page."|t }}
                {% endif %}
              </div>
            {% endif %}
          </div>
        </section>
      </aside>
    </div>

    {% if recommended_events %}
      <section class="mel-event-book__recommendations" aria-labelledby="mel-event-book-recommendations-title">
        <header class="mel-event-book__recommendations-head">
          <h2 class="mel-event-book__recommendations-title" id="mel-event-book-recommendations-title">
            {{ 'More events'|t }}
          </h2>
        </header>
        <div class="mel-event-book__recommendations-body">
          {{ recommended_events }}
        </div>
      </section>
    {% endif %}
  </div>
</div>
