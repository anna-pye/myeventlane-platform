// ==========================================================================
// Event Grid Component
// ==========================================================================
// Canonical grid layout for all Event listing Views (front page, taxonomy, search).
// Single source of truth for event card grid layout.

@use '../tokens/spacing' as space-tokens;
@use '../tokens/breakpoints';

.mel-event-grid {
  display: grid !important;
  // Humanitix-density: 4-column grid at desktop for optimal density
  grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  gap: space-tokens.mel-space(4) !important;
  width: 100% !important;
  box-sizing: border-box;

  // Remove ANY wrapper divs that break the grid - make them invisible to grid
  .view,
  .view-content,
  .views-row,
  div[class*="view"],
  div[class*="views"] {
    display: contents !important;
  }

  // Ensure grid items are equal width and don't overflow
  // BUT: Allow override for sticker wall (see homepage SCSS)
  > * {
    min-width: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    display: block !important;
  }

  // Ensure event cards are grid items - target them directly
  .mel-card,
  .mel-event-card,
  article[class*="card"],
  article[class*="event"] {
    display: block !important;
    width: 100% !important;
    min-width: 0 !important;
    max-width: 100% !important;
    grid-column: auto !important;
  }

  @media (max-width: 1023px) {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }

  @media (max-width: 640px) {
    grid-template-columns: 1fr !important;
  }
}

// Exception: Sticker Wall overrides this (defined in _homepage.scss)
// This prevents the minmax(0, 1fr) from collapsing cards on homepage
.mel-sticker-wall .mel-event-grid {
  // Override handled in _homepage.scss with higher specificity
}

// ---------------------------------------------------------------------------
// Force grid in all container contexts
// ---------------------------------------------------------------------------

.mel-section .mel-event-grid,
.mel-container .mel-event-grid,
.view-content .mel-event-grid,
.view .mel-event-grid,
.mel-page .mel-event-grid,
.mel-content .mel-event-grid {
  display: grid !important;
  // Humanitix-density: 4-column grid at desktop for optimal density
  grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  gap: space-tokens.mel-space(4) !important;
  width: 100% !important;
  max-width: 100% !important;
  box-sizing: border-box !important;

  // Remove ANY wrapper divs that break the grid
  .view,
  .view-content,
  .views-row,
  div[class*="view"],
  div[class*="views"] {
    display: contents !important;
  }

  > * {
    min-width: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    display: block !important;
  }

  // Ensure event cards are grid items
  .mel-card,
  .mel-event-card,
  article[class*="card"],
  article[class*="event"] {
    display: block !important;
    width: 100% !important;
    min-width: 0 !important;
    max-width: 100% !important;
    grid-column: auto !important;
  }

  @media (max-width: 1023px) {
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }

  @media (max-width: 640px) {
    grid-template-columns: 1fr !important;
  }
}
