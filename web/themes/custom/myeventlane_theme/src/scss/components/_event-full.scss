// ==========================================================================
// Event Full Page – Option A final polish
// ==========================================================================
// Overrides for node--event--full.html.twig.
// Keep these overrides small and specific so we don’t regress listing cards.

.mel-event {
  // Constrain the hero image (no full-bleed).
  .mel-event__hero {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;

    // Undo the full-bleed layout from _event-page.scss.
    margin-left: auto;
    margin-right: auto;
    height: auto;
    overflow: visible;
    border-radius: 0;
    background: transparent;
  }

  .mel-event__hero-inner {
    overflow: hidden;
    border-radius: 24px;
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 420px;
  }

  // Support <picture> wrappers from responsive image output.
  .mel-event__hero-inner picture,
  .mel-event__hero-inner .media,
  .mel-event__hero-inner .field,
  .mel-event__hero-inner .field__item {
    width: 100%;
    height: 100%;
  }

  .mel-event__hero-inner img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    object-position: center;
    display: block;
  }

  // Left card overflow + padding fix.
  .mel-event__main.mel-card {
    padding: 2rem;
  }

  // Title now sits at the top (date badge removed).
  .mel-event__title {
    margin-top: 0;
  }

  // Venue “@” row.
  .mel-event__venue {
    display: flex;
    align-items: baseline;
    gap: 0.4rem;
    margin-top: 0.85rem;

    // Slightly bold as requested.
    font-weight: 600;
    color: #111827;

    // Hide field labels if the venue field outputs them.
    .field__label {
      display: none;
    }

    // Ensure venue contents behave like inline text.
    address {
      display: inline;
      font-style: normal;
      margin: 0;
    }
  }

  .mel-event__venue-at {
    color: var(--mel-coral);
    font-weight: 700;
  }

  .mel-event__venue-name {
    // Keep as normal text but readable.
    font-weight: inherit;

    // The field render output may include wrapper <div>s; keep it inline.
    .field,
    .field__item,
    p {
      display: inline;
      margin: 0;
    }

    // Some field formatters output a plain first child <div> label (no classes).
    // Hide that label without hiding the wrapper (previously caused venue to disappear).
    > div > div:first-child {
      display: none;
    }
  }

  // Date/time row below venue (no clipping).
  .mel-event__datetime {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-top: 0.5rem;
    color: #6b7280;

    .field__label,
    .field > div:first-child {
      display: none;
    }

    // Some datetime formatters output a plain first child <div> label (no classes).
    > div > div:first-child {
      display: none;
    }

    // Drupal field wrappers can add block elements; keep them compact.
    > div {
      display: inline-flex;
      flex-wrap: wrap;
      gap: 0.35rem;
    }

    > div > div,
    p {
      margin: 0;
    }

    time {
      font-weight: 600;
      color: #111827;
    }

    // Slightly softer end time.
    > div + div time {
      font-weight: 600;
      color: #6b7280;
    }
  }

  // Bottom pill row: Category (existing pill style) + Accessibility.
  .mel-event__pills {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-top: 1.5rem;
    align-items: center;
  }

  .mel-event__meta--pills {
    margin: 0;
  }

  .mel-event__meta--pills > div {
    // The base pill styling is defined in _event-page.scss on .mel-event__meta.
    // Ensure it still applies when placed in the bottom row.
    margin: 0;
  }

  // Map container sizing + visibility.
  .mel-event__map {
    overflow: hidden;

    iframe,
    .leaflet-container,
    .myeventlane-event-map-container {
      height: 260px;
      min-height: 260px;
    }
  }

  .mel-event__map-address {
    padding: 0.9rem 1.25rem 1.1rem;
    border-top: 1px solid rgba(0, 0, 0, 0.06);
    color: #374151;
    line-height: 1.5;

    .field__label {
      display: none;
    }

    .address,
    address {
      padding: 0;
      margin: 0;
      font-style: normal;
    }
  }

  // Organiser card: show a small rounded logo (if present) or a placeholder.
  .mel-event__organiser-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    justify-content: center;
  }

  .mel-event__organiser-avatar {
    width: 36px;
    height: 36px;
    border-radius: 999px;
    background: rgba(0, 0, 0, 0.06);
    border: 1px solid rgba(0, 0, 0, 0.08);
    flex: 0 0 36px;
  }

  .mel-event__organiser-content {
    // If the referenced entity renders an image, make it a small rounded logo.
    img {
      width: 36px;
      height: 36px;
      border-radius: 999px;
      object-fit: cover;
      display: inline-block;
      vertical-align: middle;
      margin-right: 0.5rem;
    }

    // Keep any wrappers compact.
    .field__label {
      display: none;
    }

    .field,
    .field__item,
    p {
      margin: 0;
    }
  }

  // Location info card: keep it visually consistent and non-redundant.
  .mel-event__location-info {
    .mel-event-section-title {
      margin: 0;
    }

    .field__label,
    > div > div:first-child {
      display: none;
    }

    address {
      font-style: normal;
      margin: 0;
    }
  }

  // CTA card spacing alignment (don’t change CTA logic).
  .mel-event__action {
    > *:first-child {
      margin-top: 0;
    }

    > *:last-child {
      margin-bottom: 0;
    }
  }
}

@media (max-width: 900px) {
  .mel-event {
    .mel-event__hero {
      padding: 0 1rem;
    }

    .mel-event__hero-inner {
      height: 320px;
      border-radius: 20px;
    }

    .mel-event__main.mel-card {
      padding: 1.5rem;
    }
  }
}
