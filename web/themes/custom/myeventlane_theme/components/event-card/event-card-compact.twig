{%
  set item = item|default({
    url: '#',
    title: '',
    date: '',
    price: '',
    category: null, # { label, color_class }
    thumb: null
  })
%}

{% set is_promoted = is_promoted|default(false) %}
{% set is_past = is_past|default(false) %}

<article class="mel-card mel-card--compact{% if is_promoted %} mel-card--promoted{% endif %}{% if is_past %} mel-card--past{% endif %}">
  <a class="mel-card__link" href="{{ item.url }}">
    {% if item.thumb %}
      <div class="mel-card__thumb">
        {{ item.thumb }}
      </div>
    {% endif %}

    {% if is_promoted %}
      <div class="mel-featured-badge" role="note" aria-label="{{ 'Featured event'|t }}">
        <span class="mel-featured-badge__icon" aria-hidden="true">✨</span>
        <span class="mel-featured-badge__text">{{ 'Featured'|t }}</span>
      </div>
    {% endif %}

    <div class="mel-card__compact-body">
      <div class="mel-card__compact-top">
        {% if item.category %}
          <span class="mel-dot {{ item.category.color_class|default('') }}" aria-hidden="true"></span>
        {% endif %}
        <h3 class="mel-card__compact-title">{{ item.title }}</h3>
      </div>
      <div class="mel-card__compact-meta">
        {% if item.date %}<span class="mel-meta">{{ item.date }}</span>{% endif %}
        {% if item.price %}<span class="mel-meta-sep">•</span><span class="mel-meta">{{ item.price }}</span>{% endif %}
      </div>
    </div>
  </a>
</article>
